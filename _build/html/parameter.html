

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. 参数相关 &mdash; KingbaseES Frequently Asked Questions   documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/js/custom.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. License 相关" href="license.html" />
    <link rel="prev" title="2. PLSQL类" href="plsql.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> KingbaseES Frequently Asked Questions
          

          
          </a>

          
            
            
              <div class="version">
                 
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">前言</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="legalnotice.html">版权声明</a></li>
</ul>
<p class="caption"><span class="caption-text">常见问题</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sql.html">1. SQL类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id1">1.1. 空值问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql.html#null">1.1.1. ‘’ 与 null 兼容性</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql.html#is-null">1.1.2. 判断值是否为空，要用 is null</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql.html#pg">1.1.3. PG模式下，‘’ 值问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql.html#ora-input-emptystr-isnull">1.1.4. Ora_input_emptystr_isnull对于字符类型空值的影响</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql.html#id2">1.1.5. Ora_input_emptystr_isnull对于数值类型空值的影响</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#core">1.2. Core分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql.html#id3">1.2.1. 多线程core分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="sql.html#id4">1.2.2. 如何生成core文件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id5">1.3. 关键字问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="sql.html#id6">1.3.1. 如何确认是否系统关键字</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id7">1.4. 乱码或无效字符编码</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#windows">1.5. Windows版本安装未注册服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id8">1.6. 如何创建一个间隔分区</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#kesv8r2-3">1.7. [KESV8R2/3] 客服端服务器编码原理说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#mysqlsql-mode">1.8. 兼容MySQL参数sql_mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#mysql-date-format">1.9. MySQL date_format改写</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id9">1.10. 共有同义词和私有同义词有什么区别</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id10">1.11. 同义词查找规则</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id11">1.12. 如何查询版本的提交号</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id12">1.13. 遇到关键字无法使用作为表名或列名</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#nextval">1.14. Nextval在同一条语句中的值</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id13">1.15. 能为模式指定表空间吗？</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id14">1.16. 丢失了数据库密码，如何恢复？</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#cache">1.17. 序列的cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#oid">1.18. 什么是OID？</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#ctid">1.19. 什么是CTID？</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id15">1.20. 数据库大小限制</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#kes">1.21. KES数据页结构</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#copy">1.22. 如何将数据从客户端通过copy命令导入数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id16">1.23. Windows 如何配置免密登录</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id17">1.24. 命令报参数错误问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#to-date">1.25. To_date 函数问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id18">1.26. 视图源定义信息为啥和创建的语句不一样</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id19">1.27. 字符串类型长度怎么获取</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#sys-guid">1.28. 如何改变sys_guid() 返回值类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#openssl">1.29. OPENSSL问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#pg-relation-size">1.30. Pg_relation_size 问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id20">1.31. 全角字符支持</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#id21">1.32. 时间函数问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#ddl">1.33. 如何取得对象的DDL信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#update">1.34. 全表update非常慢</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html#failed-to-find-conversion-function-from-unknown-to-text">1.35. Failed to find conversion function from UNKNOWN to TEXT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plsql.html">2. PLSQL类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plsql.html#kes-pl-sql-block-not-end-correctly">2.1. KES创建过程，报错：PL/SQL block not end correctly</a></li>
<li class="toctree-l2"><a class="reference internal" href="plsql.html#out">2.2. 如何调用含out参数的存储过程</a></li>
<li class="toctree-l2"><a class="reference internal" href="plsql.html#savepoint">2.3. Savepoint 使用问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="plsql.html#create-operator-bool">2.4. Create operator（bool与整型比较）</a></li>
<li class="toctree-l2"><a class="reference internal" href="plsql.html#for">2.5. For循环变量</a></li>
<li class="toctree-l2"><a class="reference internal" href="plsql.html#id1">2.6. 函数变量不能超过512</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. 参数相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#kingbase-conf-kingbase-auto-conf">3.1. Kingbase.conf 与 kingbase.auto.conf 参数文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">3.2. 不同参数如何生效</a></li>
<li class="toctree-l2"><a class="reference internal" href="#error-user-connect-times-and-max-error-user-connect-times">3.3. error_user_connect_times and max_error_user_connect_times</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exclude-reserved-words">3.4. Exclude_reserved_words 排除关键字</a></li>
<li class="toctree-l2"><a class="reference internal" href="#max-locks-per-transaction">3.5. max_locks_per_transaction设置过大引发数据库启动问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="#max-identifier-length">3.6. max_identifier_length</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">3.7. 数据库启动失败，报“内存段超过可用内存”</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">4. License 相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="license.html#id1">4.1. 如何查询license有效时间</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#id2">4.2. 如何查询license完整信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#id3">4.3. 如何查询license单项信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#id4">4.4. 替换license步骤</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#id5">4.5. 替换license是否要重启数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#id6">4.6. 如何判断license有效</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#id7">4.7. License与网卡</a></li>
<li class="toctree-l2"><a class="reference internal" href="license.html#bondlicense">4.8. Bond网卡切换license支持问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extended-plug-in.html">5. 扩展组件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#id2">5.1. 如何查看系统是否支持某组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#oracle-fdw">5.2. oracle_fdw支持平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#create-extension-oracle-fdw-so">5.3. create extension oracle_fdw报.so找不到加载失败</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#id3">5.4. oracle_fdw支持功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#sys-pathman">5.5. Sys_pathman</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#separate-power">5.6. Separate_power</a></li>
<li class="toctree-l2"><a class="reference internal" href="extended-plug-in.html#sysaudit">5.7. Sysaudit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extended-plug-in.html#id4">5.7.1. 如何删除语句审计日志？</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gis.html">6. 空间组件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gis.html#create-extension-postgris-glibc-2-18-not-defined-in-file-libc-so-6">6.1. Create extension postgris 报错“GLIBC_2.18 not defined in file libc.so.6”</a></li>
<li class="toctree-l2"><a class="reference internal" href="gis.html#acgis">6.2. acgis版本备份还原</a></li>
<li class="toctree-l2"><a class="reference internal" href="gis.html#r6">6.3. R6 是否支持超图</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="system-management.html">7. 系统管理类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="system-management.html#kesv8r2-r3">7.1. [KESV8R2/R3]表在指定表空间，为何显示为默认表空间？</a></li>
<li class="toctree-l2"><a class="reference internal" href="system-management.html#sys-class-reltablespace-0">7.2. 为什么sys_class里显示的很多表的 RELTABLESPACE值为 0？</a></li>
<li class="toctree-l2"><a class="reference internal" href="system-management.html#kes-sys-catalog">7.3. KES有什么办法，默认不读取sys_catalog下的系统视图？</a></li>
<li class="toctree-l2"><a class="reference internal" href="system-management.html#ip">7.4. 网线拔插后，IP丢失问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">8. 工具类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tools.html#s-pgsql-5432">8.1. 客户端连接找 .s.PGSQL.5432</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#er">8.2. 客户端管理工具无法加载ER图问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#client-encoding">8.3. 如何修改管理工具client_encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#id2">8.4. 迁移工具对于同名对象处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#invalid-byte-sequence-for-encoding-utf8-0x00">8.5. 数据迁移报“invalid byte sequence for encoding &quot;UTF8&quot;: 0x00 &quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#id3">8.6. 开始菜单没有数据库快捷工具图标</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#gui">8.7. 缺少操作系统GUI组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#r3scram-sha-256">8.8. R3客户端无法使用scram-sha-256认证</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#undefined-symbol-pqgssencinuse">8.9. undefined symbol: PqgssEncInUse</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#bulkload">8.10. Bulkload并行加载报错</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data-security.html">9. 数据安全</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data-security.html#sys-rmancurrent-time-may-be-rewound">9.1. Sys_rman备份报“current time may be rewound”</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-security.html#id2">9.2. 如何导出一致时间点的数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-security.html#id3">9.3. 索引问题导致数据访问问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TPCC-test.html">10. TPCC测试类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TPCC-test.html#tpccautovacuum">10.1. tpcc测试中是否需要开启autovacuum</a></li>
<li class="toctree-l2"><a class="reference internal" href="TPCC-test.html#index-cursor-id">10.2. index_cursor_id参数的数值是固定的么？</a></li>
<li class="toctree-l2"><a class="reference internal" href="TPCC-test.html#tpccunixdomain">10.3. 在tpcc测试中unixdomain作用是？</a></li>
<li class="toctree-l2"><a class="reference internal" href="TPCC-test.html#id1">10.4. 集群环境下测试tpcc连接参数怎样配置？</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interface.html">11. 接口</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interface/jdbc.html">11.1. JDBC接口</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interface/jdbc.html#id1">11.1.1. JDBC打开日志方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/jdbc.html#vip-jdbc">11.1.2. 没有VIP情况下，JDBC连接如何配置？</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/jdbc.html#v8r6-jdbcvip">11.1.3. V8R6 JDBC能否使用VIP？</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/jdbc.html#lobupdate">11.1.4. LOB对象update机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/jdbc.html#kbblob-oracle">11.1.5. KBBlob 迁移至Oracle</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">12. Docker环境相关问题</a><ul>
<li class="toctree-l2"><a class="reference internal" href="docker.html#exit-code-137">12.1. 【exit code 137】错误信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html#docker-license">12.2. Docker 环境下license机制</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="high-availability.html">13. 读写分离</a><ul>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html#id2">13.1. 读写分离分发机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html#id3">13.2. 如何测试一下现场的备机失败，转发主机的场景？</a></li>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html#id4">13.3. 失败重发机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html#ssh">13.4. ssh 引发的相关问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html#id5">13.5. 读写分离备机备份报错</a></li>
<li class="toctree-l2"><a class="reference internal" href="high-availability.html#hash">13.6. 读写分离集群Hash索引老是出问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cluster_faq.html">14. 高可用集群</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#libssl">14.1. libssl 问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#if-up-cmd-faild">14.2. if_up_cmd faild</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#arping">14.3. arping问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#arping-path">14.4. arping_path版本不正确</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#eshamodel-sh">14.5. esHAmodel.sh脚本错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#cluster">14.6. 集群名称不能使用cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#id2">14.7. 网络问题导致备机无法加入集群</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbasecluster">14.8. kingbasecluster服务启动失败</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#sys-md5">14.9. 集群sys_md5生成错误密码</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#node">14.10. 两节点读写分离集群，集群无法创建主备，两个node都是主</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#max-connections">14.11. 集群无法修改max_connections参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#id3">14.12. 软连接配置错误，导致集群启动报缺少磁盘空间</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#rootssh-auth-fail">14.13. 未配置root用户ssh互信，部署集群时，添加节点“auth fail”</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#show-pool-nodes">14.14. 防火墙导致集群show pool_nodes信息错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#v8r3auth-fail">14.15.  V8R3集群部署工具“auth fail”错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbase-monitor-shthere-are-no-1-standbys-in-sys-stat-replication">14.16. 集群通过kingbase_monitor.sh启动后“There are no 1 standbys in sys_stat_replication......&quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kes-v8r2kingbasecluster9999">14.17. KES V8R2集群kingbasecluster服务9999端口无法连接</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#r3-sys-md5">14.18. R3集群部署工具部署时，出现sys_md5的错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#r3bmjeshamodel-sh">14.19. R3集群BMJ启动esHAmodel.sh失败问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#bmj-r3es-clientes-server">14.20. BMJ R3集群切换后es_client无法和es_server通讯问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbasees-r3standby">14.21. kingbaseES R3集群启动后“无standby”问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbasees-r3kingbasecluster">14.22. kingbaseES R3集群kingbasecluster无法正确识别备库状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbasees-r3-db-vip-cluster-vip">14.23. kingbaseES R3 集群无法加载db VIP 和cluster VIP案例</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#down">14.24. 网关无法连通，导致集群down，手工启动数据库服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbaseclusterkingbase-monitor-sh-kingbasecluster">14.25. 备库kingbasecluster服务通过kingbase_monitor.sh启动失败，手工启动kingbasecluster服务解决</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kes-v8r3kingbase-monitor-sh-pam-nologin-8">14.26. KES V8R3集群通过kingbase_monitor.sh启动失败，提示“pam_nologin(8)&quot;错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#conflict-with-recovery">14.27. conflict with recovery问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#sys-dump">14.28. sys_dump备份问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#sys-restore">14.29. sys_restore 恢复数据错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="cluster_faq.html#kingbasees-r6open-files">14.30. kingbaseES R6集群部署“open files”问题</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">KingbaseES Frequently Asked Questions</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">3. </span>参数相关</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1><span class="section-number">3. </span>参数相关<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="kingbase-conf-kingbase-auto-conf">
<h2><span class="section-number">3.1. </span>Kingbase.conf 与 kingbase.auto.conf 参数文件<a class="headerlink" href="#kingbase-conf-kingbase-auto-conf" title="Permalink to this headline">¶</a></h2>
<p>适用版本：V8R3 , V8R6</p>
<p>问题描述：这两个参数文件的读取先后、优先级</p>
<p>问题解答：</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>对于kingbase.conf 与 kingbase.auto.conf文件，如果有相同条目，则以kingbase.auto.conf文件参数值为准（忽略 kingbase.conf 相同条目）。</p></li>
<li><p>读取先后顺序：数据库启动时先读取 kingbase.conf，再读取kingbase.auto.conf，如果二者相同条目，会忽略kingbase.conf文件的相同条目。</p></li>
<li><p>所有文件读取完成后，才apply参数，由于kingbase.conf参数读取在前，kingbase.auto.conf读取在后，对于有先后顺序要求的参数必须注意。</p></li>
</ol>
</div></blockquote>
<p>举例如下：</p>
<blockquote>
<div><p>kingbase.conf 文件有 error_user_connect_times and max_error_user_connect_times这两个参数，但是用户又运行了alter system setmax_error_user_connect_times，相当于在kingbase.auto.conf文件增加了max_error_user_connect_times条目。当系统启动时，先读取kingbase.conf文件，再读取kingbase.auto.conf文件，由于kingbase.auto.conf文件也有max_error_user_connect_times条目，就会忽略kingbase.conf文件中的同样条目。而apply的顺序是按读取先后进行的，当apply error_user_connect_times （假设100）参数时，由于还没apply max_error_user_connect_times（在kingbase.auto.conf）参数 ，认为 max_error_user_connect_times 值为默认的 5 ，导致报错。</p>
</div></blockquote>
</div>
<div class="section" id="id2">
<h2><span class="section-number">3.2. </span>不同参数如何生效<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>适用版本：V8R3 , V8R6</p>
<p>问题描述：为什么有些参数reload就可以生效，而有些参数必须重启数据库？</p>
<p>问题解析：</p>
<blockquote>
<div><p>修改参数后，如何生效是由pg_settings.context值决定的。具体如下：</p>
<ul class="simple">
<li><p>internal：这些参数是在编译或initdb时设定的，不能修改。如：block_size， database_mode</p></li>
<li><p>kingbase: 修改这些参数要求重启数据库。如：archive_mode</p></li>
<li><p>sighup: 不需要重启数据库，只需reload就可生效。Kingbase会把sighup传递给子进程，通知子进程重新读取配置。如：archive_command</p></li>
<li><p>backend: 不需要重启数据库，只需reload就可生效，但只影响后续启动的会话。如：log_connections</p></li>
<li><p>user: 表示可以在会话中用 set 命令设置。如：bytea_output</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="error-user-connect-times-and-max-error-user-connect-times">
<h2><span class="section-number">3.3. </span>error_user_connect_times and max_error_user_connect_times<a class="headerlink" href="#error-user-connect-times-and-max-error-user-connect-times" title="Permalink to this headline">¶</a></h2>
<p>适用版本：V8R3 , V8R6</p>
<p>问题描述：为什么数据库启动报错：<em>100000 is outsize the max valid range for parameter &quot;max_error_user_connect_times&quot; 5</em>，而实际的<em>max_error_user_connect_times</em>参数值并不是5</p>
<p>问题解答：这两个参数要求先后顺序，max_error_user_connect_times参数必须放于error_user_connect_times
前面，否则会默认为max_error_user_connect_times是5 ，报错。</p>
</div>
<div class="section" id="exclude-reserved-words">
<h2><span class="section-number">3.4. </span>Exclude_reserved_words 排除关键字<a class="headerlink" href="#exclude-reserved-words" title="Permalink to this headline">¶</a></h2>
<p>适用版本：V8R3 , V8R6</p>
<p>问题描述：客户设置Exclude_reserved_words=’level’，导致show transaction isolation level 语法错误。</p>
<p>问题分析：关键字可配置功能实际实现：将原来的关键字配置为非关键字，词法解析到该字符串时，不再将其识别为关键字，而认为是一个普通的字符串。该功能风险点：排除该关键字，那么语法规则中涉及到该关键字的语法规则都将失效，甚至出现莫名的错误（以为是关键字，结果识别为字符串，导致语法对应错误，识别为其他语义）。本例中配置了level，导致涉及level的语法失效。</p>
</div>
<div class="section" id="max-locks-per-transaction">
<h2><span class="section-number">3.5. </span>max_locks_per_transaction设置过大引发数据库启动问题<a class="headerlink" href="#max-locks-per-transaction" title="Permalink to this headline">¶</a></h2>
<p>适用版本：V8R3 , V8R6</p>
<p>问题描述：数据库无法启动，报无法分配内存</p>
<p>问题解析：</p>
<blockquote>
<div><ul>
<li><p>max_locks_per_transaction：这个参数控制每个事务能够得到的平均的对象锁的个数，默认值是64。数据库在启动以后创建的共享锁表最大可以保存max_locks_per_transaction * (max_connections + max_prepared_transactions)个对象锁。每个锁空间需预留270个字节的共享内存。单个事务可以同时获得的对象锁的数目可以超过max_locks_per_transaction的值，只要共享锁表中还有剩余空间。</p></li>
<li><p>max_connections(integer)：这个参数只有在启动数据库时，才能被设置。它决定数据库可以同时建立的最大的客户端连接的数目。默认值是100。每个连接占用 400字节共享内存。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Increasing max_connections costs ~400 bytes of shared memory per connection slot, plus lock space (see max_locks_per_transaction).</p>
</div>
</li>
<li><p>用户将 max_locks_per_transaction值设置 为 215927809，导致系统启动时要求分配  215927809 * 270 * 1000（max_connections）= 54TB的内存空间，数据库启动失败</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="max-identifier-length">
<h2><span class="section-number">3.6. </span>max_identifier_length<a class="headerlink" href="#max-identifier-length" title="Permalink to this headline">¶</a></h2>
<p>适用版本：V8R3 , V8R6</p>
<p>问题描述：对象名称能否超过63字符？</p>
<p>问题解答：参数 max_identifier_length决定最大的对象名称长度，该参数只能在编译时指定，不能修改。默认是63。对于汉字表名，根据编码的不同，一个汉字占2-3字符。</p>
</div>
<div class="section" id="id3">
<h2><span class="section-number">3.7. </span>数据库启动失败，报“内存段超过可用内存”<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>适用版本：所有版本</p>
<p>问题描述：</p>
<blockquote>
<div><p>数据库启动报内存不足，错误信息如下：</p>
<a class="reference internal image-reference" href="_images/FAQ20071.png"><img alt="_images/FAQ20071.png" src="_images/FAQ20071.png" style="width: 553px; height: 84px;" /></a>
</div></blockquote>
<p>原因分析：</p>
<blockquote>
<div><ul class="simple">
<li><p>原因1：实际物理内存不够</p></li>
</ul>
<a class="reference internal image-reference" href="_images/FAQ20092.png"><img alt="_images/FAQ20092.png" src="_images/FAQ20092.png" style="width: 460px; height: 44px;" /></a>
<ul class="simple">
<li><p>原因2：swap 与 shared_buffers 相差过大，如以上例子，Swap才配置2G，而Shared_buffers 16G</p></li>
<li><p>原因3：系统参数设置过小</p></li>
</ul>
<a class="reference internal image-reference" href="_images/FAQ20175.png"><img alt="_images/FAQ20175.png" src="_images/FAQ20175.png" style="width: 421px; height: 36px;" /></a>
<a class="reference internal image-reference" href="_images/FAQ20177.png"><img alt="_images/FAQ20177.png" src="_images/FAQ20177.png" style="width: 267px; height: 177px;" /></a>
<ul class="simple">
<li><p>原因4：启用了大页，但是大页内存却不够。数据库参数huge_pages = on，表示数据库启动时只能用大页。如果操作系统大页内存设置过小，数据库就无法启动</p></li>
</ul>
<a class="reference internal image-reference" href="_images/FAQ20260.png"><img alt="_images/FAQ20260.png" src="_images/FAQ20260.png" style="width: 312px; height: 64px;" /></a>
<ul class="simple">
<li><p>原因5：数据库参数设置不合理。除了内存相关的参数，如shared_buffers外，还有其他参数也会要求内存段：max_connections, max_prepared_transactions都会影响内存段的分配。还有 max_locks_per_transaction参数，每个需要270字节的内存。</p></li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="license.html" class="btn btn-neutral float-right" title="4. License 相关" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plsql.html" class="btn btn-neutral float-left" title="2. PLSQL类" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 1999-2021, 北京人大金仓信息技术股份有限公司

    </p>
  </div>
    
    
     使用 <a href="http://sphinx-doc.org/">Sphinx</a> 创建 。
     最后更新于 Dec 07, 2021。 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>