

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11.3. Hibernate使用常见问题 &mdash; KingbaseES Frequently Asked Questions   documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/js/custom.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="11.4. Mybatis 常见问题" href="mybatis.html" />
    <link rel="prev" title="11.2. Spring-JDBC 常见问题" href="spring-jdbc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> KingbaseES Frequently Asked Questions
          

          
          </a>

          
            
            
              <div class="version">
                 
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">前言</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../legalnotice.html">版权声明</a></li>
</ul>
<p class="caption"><span class="caption-text">常见问题</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../sql.html">1. SQL类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id1">1.1. 空值问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#null">1.1.1. ‘’ 与 null 兼容性</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#is-null">1.1.2. 判断值是否为空，要用 is null</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#pg">1.1.3. PG模式下，‘’ 值问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#ora-input-emptystr-isnull">1.1.4. Ora_input_emptystr_isnull对于字符类型空值的影响</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#id2">1.1.5. Ora_input_emptystr_isnull对于数值类型空值的影响</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#core">1.2. Core分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#id3">1.2.1. 多线程core分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#id4">1.2.2. 如何生成core文件</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id5">1.3. 关键字问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../sql.html#id6">1.3.1. 如何确认是否系统关键字</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id7">1.4. 乱码或无效字符编码</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#windows">1.5. Windows版本安装未注册服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id8">1.6. 如何创建一个间隔分区</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#kesv8r2-3">1.7. [KESV8R2/3] 客服端服务器编码原理说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#mysqlsql-mode">1.8. 兼容MySQL参数sql_mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#mysql-date-format">1.9. MySQL date_format改写</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id9">1.10. 共有同义词和私有同义词有什么区别</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id10">1.11. 同义词查找规则</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id11">1.12. 如何查询版本的提交号</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id12">1.13. 遇到关键字无法使用作为表名或列名</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#nextval">1.14. Nextval在同一条语句中的值</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id13">1.15. 能为模式指定表空间吗？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id14">1.16. 丢失了数据库密码，如何恢复？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#cache">1.17. 序列的cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#oid">1.18. 什么是OID？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#ctid">1.19. 什么是CTID？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id15">1.20. 数据库大小限制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#kes">1.21. KES数据页结构</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#copy">1.22. 如何将数据从客户端通过copy命令导入数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id16">1.23. Windows 如何配置免密登录</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id17">1.24. 命令报参数错误问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#to-date">1.25. To_date 函数问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id18">1.26. 视图源定义信息为啥和创建的语句不一样</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id19">1.27. 字符串类型长度怎么获取</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#sys-guid">1.28. 如何改变sys_guid() 返回值类型</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#openssl">1.29. OPENSSL问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#pg-relation-size">1.30. Pg_relation_size 问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id20">1.31. 全角字符支持</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#id21">1.32. 时间函数问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#ddl">1.33. 如何取得对象的DDL信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#update">1.34. 全表update非常慢</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql.html#failed-to-find-conversion-function-from-unknown-to-text">1.35. Failed to find conversion function from UNKNOWN to TEXT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plsql.html">2. PLSQL类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../plsql.html#kes-pl-sql-block-not-end-correctly">2.1. KES创建过程，报错：PL/SQL block not end correctly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plsql.html#out">2.2. 如何调用含out参数的存储过程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plsql.html#savepoint">2.3. Savepoint 使用问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plsql.html#create-operator-bool">2.4. Create operator（bool与整型比较）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plsql.html#for">2.5. For循环变量</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plsql.html#id1">2.6. 函数变量不能超过512</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../parameter.html">3. 参数相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#kingbase-conf-kingbase-auto-conf">3.1. Kingbase.conf 与 kingbase.auto.conf 参数文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#id2">3.2. 不同参数如何生效</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#error-user-connect-times-and-max-error-user-connect-times">3.3. error_user_connect_times and max_error_user_connect_times</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#exclude-reserved-words">3.4. Exclude_reserved_words 排除关键字</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#max-locks-per-transaction">3.5. max_locks_per_transaction设置过大引发数据库启动问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#max-identifier-length">3.6. max_identifier_length</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parameter.html#id3">3.7. 数据库启动失败，报“内存段超过可用内存”</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">4. License 相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id1">4.1. 如何查询license有效时间</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id2">4.2. 如何查询license完整信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id3">4.3. 如何查询license单项信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id4">4.4. 替换license步骤</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id5">4.5. 替换license是否要重启数据库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id6">4.6. 如何判断license有效</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#id7">4.7. License与网卡</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#bondlicense">4.8. Bond网卡切换license支持问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extended-plug-in.html">5. 扩展组件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#id2">5.1. 如何查看系统是否支持某组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#oracle-fdw">5.2. oracle_fdw支持平台</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#create-extension-oracle-fdw-so">5.3. create extension oracle_fdw报.so找不到加载失败</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#id3">5.4. oracle_fdw支持功能</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#sys-pathman">5.5. Sys_pathman</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#separate-power">5.6. Separate_power</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extended-plug-in.html#sysaudit">5.7. Sysaudit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extended-plug-in.html#id4">5.7.1. 如何删除语句审计日志？</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gis.html">6. 空间组件</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gis.html#create-extension-postgris-glibc-2-18-not-defined-in-file-libc-so-6">6.1. Create extension postgris 报错“GLIBC_2.18 not defined in file libc.so.6”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gis.html#acgis">6.2. acgis版本备份还原</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gis.html#r6">6.3. R6 是否支持超图</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../system-management.html">7. 系统管理类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../system-management.html#kesv8r2-r3">7.1. [KESV8R2/R3]表在指定表空间，为何显示为默认表空间？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system-management.html#sys-class-reltablespace-0">7.2. 为什么sys_class里显示的很多表的 RELTABLESPACE值为 0？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system-management.html#kes-sys-catalog">7.3. KES有什么办法，默认不读取sys_catalog下的系统视图？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system-management.html#ip">7.4. 网线拔插后，IP丢失问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">8. 工具类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#s-pgsql-5432">8.1. 客户端连接找 .s.PGSQL.5432</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#er">8.2. 客户端管理工具无法加载ER图问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#client-encoding">8.3. 如何修改管理工具client_encoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#id2">8.4. 迁移工具对于同名对象处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#invalid-byte-sequence-for-encoding-utf8-0x00">8.5. 数据迁移报“invalid byte sequence for encoding &quot;UTF8&quot;: 0x00 &quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#id3">8.6. 开始菜单没有数据库快捷工具图标</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#gui">8.7. 缺少操作系统GUI组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#r3scram-sha-256">8.8. R3客户端无法使用scram-sha-256认证</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#undefined-symbol-pqgssencinuse">8.9. undefined symbol: PqgssEncInUse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#bulkload">8.10. Bulkload并行加载报错</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data-security.html">9. 数据安全</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data-security.html#sys-rmancurrent-time-may-be-rewound">9.1. Sys_rman备份报“current time may be rewound”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-security.html#id2">9.2. 如何导出一致时间点的数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data-security.html#id3">9.3. 索引问题导致数据访问问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../TPCC-test.html">10. TPCC测试类</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../TPCC-test.html#tpccautovacuum">10.1. tpcc测试中是否需要开启autovacuum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TPCC-test.html#index-cursor-id">10.2. index_cursor_id参数的数值是固定的么？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TPCC-test.html#tpccunixdomain">10.3. 在tpcc测试中unixdomain作用是？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TPCC-test.html#id1">10.4. 集群环境下测试tpcc连接参数怎样配置？</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../interface.html">11. 接口</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="jdbc.html">11.1. JDBC接口</a><ul>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id1">11.1.1. JDBC打开日志方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#vip-jdbc">11.1.2. 没有VIP情况下，JDBC连接如何配置？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#v8r6-jdbcvip">11.1.3. V8R6 JDBC能否使用VIP？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#lobupdate">11.1.4. LOB对象update机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#kbblob-oracle">11.1.5. KBBlob 迁移至Oracle</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jdbcjarjdk-oscpu">11.1.6. JDBC的jar包需要区分JDK版本，需要区分OS和CPU平台吗？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jdbcurl">11.1.7. JDBC的连接参数只能通过URL串来填写吗？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id2">11.1.8. 如何使用JDBC配置文件方式？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id3">11.1.9. JDBC读写分离怎么打开关闭?</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id4">11.1.10. JDBC 读写分离都需要配置哪些参数？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id5">11.1.11. JDBC读写分离一主两备的URL和配置文件的样例</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id6">11.1.12. JDBC连接池功能，是否开启，开启后的功能及性能</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id7">11.1.13. JDBC读写分离配置参数依赖关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id8">11.1.14. JDBC读写分离在哪些情况下重发也不会成功</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id9">11.1.15. JDBC读写分离分发策略</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id10">11.1.16. JDBC读写分离相关参数默认值</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#sockettimeout0-jdbc">11.1.17. 集群状态正常，sockettimeout设置大于0时，为什么执行时间超长的事物会失败并导致jdbc重建连接？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#rewind">11.1.18. 主备切换后，备机rewind，或者备机故障后，备机恢复时为什么 备机的连接数是持续上升，而不是一次性全部建好？</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#web-jdbc">11.1.19. 主机切机后，应用第一次登陆WEB慢，JDBC等待时间分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id11">11.1.20. JDBC打开日志方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jdbc-utf8">11.1.21. JDBC 报错：无效的 &quot;UTF8&quot; 编码字节顺序</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jvmjdbc">11.1.22. 系统JVM和应用和JDBC和数据库编码之间的关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#v7-v8-jdbc">11.1.23. V7 V8 JDBC 混用问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id20">11.1.24. JDBC读写分离模式混淆找不到表</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id21">11.1.25. JDBC读写分离日志分析办法</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jdbcssl">11.1.26. JDBC使用SSL加密</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id22">11.1.27. JDBC常见异常</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jdbcblob">11.1.28. JDBC读取BLOB乱码</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#id23">11.1.29. 读写分离分发现象分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#com-kingbase8-util-ksqlexception-error-type-q-does-not-exist-r6">11.1.30. com.kingbase8.util.KSQLException: ERROR: type &quot;q&quot; does not exist（R6）</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#fetchsize">11.1.31. fetchsize功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#r3r6-jar">11.1.32. 同时使用R3和R6，jar包冲突的解决方案</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc.html#jar">11.1.33. 如何查看jar包的版本号？</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spring-jdbc.html">11.2. Spring-JDBC 常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spring-jdbc.html#lobhandler">11.2.1. 大字段的设置--lobHandler</a></li>
<li class="toctree-l3"><a class="reference internal" href="spring-jdbc.html#org-springframework-data-jdbc-repository-config-dialectresolver-nodialectexception-cannot-determine-a-dialect-for-org-springframework-jdbc-core-jdbctemplate-7c90b7b7-please-provide-a-dialect">11.2.2. org.springframework.data.jdbc.repository.config.DialectResolver$NoDialectException: Cannot determine a dialect for org.springframework.jdbc.core.JdbcTemplate&#64;7c90b7b7. Please provide a Dialect.</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">11.3. Hibernate使用常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">11.3.1. Hibernate使用需要配置方言包</a></li>
<li class="toctree-l3"><a class="reference internal" href="#v8-hibernatelong">11.3.2. V8 Hibernate非法long值问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernate-1">11.3.3. Hibernate 无法确定参数类型$1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernate-text-bytea">11.3.4. Hibernate 错误: 字段的类型为 TEXT, 但表达式的类型为 BYTEA你需要重写或转换表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernatesql">11.3.5. Hibernate控制输出真实SQL日志</a></li>
<li class="toctree-l3"><a class="reference internal" href="#springboot-jpa">11.3.6. Springboot JPA配置方言包问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernate-spatial">11.3.7. hibernate-spatial方言包配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernatenumericchar-1-javaboolean">11.3.8. hibernate使用numeric或char(1)映射java的boolean</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-column-name-sequence-catalog-was-not-found-in-this-resultset">11.3.9. The column name sequence_catalog was not found in this ResultSet.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hilo">11.3.10. 主键自增策略hilo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#method-com-kingbase8-jdbc-kbpreparedstatement-setcharacterstream-int-reader-long-is-not-yet-implemented">11.3.11. Method com.kingbase8.jdbc.KbPreparedStatement.setCharacterStream(int, Reader, long) is not yet implemented.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernatehql">11.3.12. Hibernate的hql不支持部分数据库函数的使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hibernateupdate">11.3.13. Hibernate设置为update已经建好表，仍旧去建表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#java-lang-nosuchmethoderror-javax-persistence-table-indexes-ljavax-persistence-index">11.3.14. java.lang.NoSuchMethodError: javax.persistence.Table.indexes()[Ljavax/persistence/Index;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user">11.3.15. 表取名user怎么规避？</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">11.3.16. 其它模式下有同名表，导致当前模式没有表但未去建表</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mybatis.html">11.4. Mybatis 常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatissql">11.4.1. Mybatis设置SQL超时时间</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatislong">11.4.2. Mybatis非法long值问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatis-text-bytea">11.4.3. Mybatis 报错：字段的类型为 TEXT, 但表达式的类型为 BYTEA你需要重写或转换表达式</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatis-jdbc">11.4.4. Mybatis 控制JDBC底层不走预编译</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatis-bind">11.4.5. Mybatis 控制Bind参数</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatis-pagehelper">11.4.6. Mybatis 使用pagehelper插件</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#id1">11.4.7. Mybatis 使用自动返回主键功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatisdatabaseid">11.4.8. Mybatis配置databaseId</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#id2">11.4.9. Mybatis使用匿名块插入语句报错</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatisscriptrunnerplsqlsql">11.4.10. Mybatis使用ScriptRunner执行含plsql的sql脚本报错</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#id3">11.4.11. Mybatis使用游标的注册方式</a></li>
<li class="toctree-l3"><a class="reference internal" href="mybatis.html#mybatisjson">11.4.12. Mybatis写json类型示例</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mybatis-plus.html">11.5. Mybatis-plus常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="mybatis-plus.html#id1">11.5.1. Mybatis-plus使用</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="activiti.html">11.6. Activiti使用常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="activiti.html#id1">11.6.1. Activiti使用</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="maven.html">11.7. Maven 仓库使用常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="maven.html#mavenkingbaseesjdbc">11.7.1. Maven本地仓库使用KingbaseES的JDBC驱动</a></li>
<li class="toctree-l3"><a class="reference internal" href="maven.html#mavenkingbaseesdialect">11.7.2. Maven本地仓库使用KingbaseES的dialect方言包</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="druid.html">11.8. Druid 数据库连接池配置问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="druid.html#id1">11.8.1. Druid 配置国产金仓数据库</a></li>
<li class="toctree-l3"><a class="reference internal" href="druid.html#id2">11.8.2. Druid 配置例子</a></li>
<li class="toctree-l3"><a class="reference internal" href="druid.html#id3">11.8.3. Druid的连接强制回收</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="c3p0.html">11.9. C3P0连接池配置问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="c3p0.html#c3p0v8">11.9.1. 常用C3p0配置金仓V8数据库</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="DBCP.html">11.10. DBCP连接池配置问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="DBCP.html#dbcpv8">11.10.1. 常用dbcp配置金仓V8数据库</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="apache-james.html">11.11. Apache James适配</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdo.html">11.12. Pdo接口常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#id1">11.12.1. 导入驱动失败</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#pdo-kdb">11.12.2. 加载 PDO_KDB 报错</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#php">11.12.3. PHP的线程安全和非线程安全</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#pdophp">11.12.4. 使用的PDO驱动与PHP版本不匹配</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#windowspdo">11.12.5. Windows下使用PDO驱动的方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#thinkphp">11.12.6. thinkphp使用过程中报函数不存在的问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="pdo.html#pdo-kdbpdo-pgsql">11.12.7. 通过金蝶等中间件查看驱动加载信息时，看不到pdo_kdb或者pdo_pgsql的信息</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="thinkPHP.html">11.13. ThinkPHP接口常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="thinkPHP.html#thinkphp-apache-kdb">11.13.1. 如何在搭建Thinkphp+apache+kdb环境</a><ul>
<li class="toctree-l4"><a class="reference internal" href="thinkPHP.html#apache">11.13.1.1. apache环境搭建</a></li>
<li class="toctree-l4"><a class="reference internal" href="thinkPHP.html#php">11.13.1.2. php环境搭建</a></li>
<li class="toctree-l4"><a class="reference internal" href="thinkPHP.html#thinkphphttpd">11.13.1.3. thinkphp在httpd中使用</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="perl.html">11.14. Perl 常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="perl.html#perl-pdi">11.14.1. Perl 驱动pdi无法加载问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="perl.html#perlperl">11.14.2. 怎么在perl中配置金仓perl驱动</a></li>
<li class="toctree-l3"><a class="reference internal" href="perl.html#id3">11.14.3. 如何排查perl驱动加载失败步骤</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="odbc.html">11.15. ODBC常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#id1">11.15.1. 环境依赖</a></li>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#linux-unixodbc">11.15.2. linux unixodbc通过连接串连接数据库操作，如何添加连接参数？</a></li>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#linuxodbc">11.15.3. linux环境下如何开启odbc驱动的日志？</a></li>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#id2">11.15.4. linux下odbc驱动接口连接数据库失败，如何排查？</a></li>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#id3">11.15.5. linux下odbc驱动开启日志？</a></li>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#sqlfreestmt-sqlclosecursor">11.15.6. SQLFreeStmt()函数与SQLCloseCursor()有什么不同？</a></li>
<li class="toctree-l3"><a class="reference internal" href="odbc.html#dns">11.15.7. 连接串中如何通过驱动名连接数据库，即不通过DNS连接数据库？</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="C%23.html">11.16. C# 常见通过问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="C%23.html#ndp">11.16.1. NDP的连接数问题</a></li>
<li class="toctree-l3"><a class="reference internal" href="C%23.html#ndpnet45net451-netcore2-0">11.16.2. NDP驱动net45、net451, netcore2.0有什么不同？</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python.html">11.17. Python通过PyODBC连接Kingbase的说明</a><ul>
<li class="toctree-l3"><a class="reference internal" href="python.html#id1">11.17.1. 环境配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="python.html#kingbasev7">11.17.2. KingbaseV7驱动配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="python.html#kingbasev8">11.17.3. KingbaseV8驱动配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="python.html#id2">11.17.4. 连接测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ruby.html">11.18. Ruby 常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ruby.html#ruby-pgkingbasees-v8r3">11.18.1. 如何使用ruby-pg驱动连接至kingbaseES V8R3数据库</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="qt.html">11.19. QT常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="qt.html#windowsqt">11.19.1. windows如何加载QT驱动</a></li>
<li class="toctree-l3"><a class="reference internal" href="qt.html#id1">11.19.2. 提需求时，如何进行描述：</a></li>
<li class="toctree-l3"><a class="reference internal" href="qt.html#ssl">11.19.3. SSL认证如何配置</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kci-v7.html">11.20. V7 KCI常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="kci-v7.html#kci-oidoid">11.20.1. 用KCI操作大对象写到用户的表里，发现OID不是创建的OID</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="oci-v7.html">11.21. V7 OCI常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="oci-v7.html#oci">11.21.1. OCI读写分离配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="oci-v7.html#id1">11.21.2. OCI日志分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="oci-v7.html#id2">11.21.3. OCI日志配置说明</a></li>
<li class="toctree-l3"><a class="reference internal" href="oci-v7.html#id3">11.21.4. OCI配置文件如何配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="oci-v7.html#oci-dci">11.21.5. OCI 和DCI的头文件可以混用吗？</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="jdbc-v7.html">11.22. V7 JDBC常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="jdbc-v7.html#jdbc">11.22.1. JDBC读写分离配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc-v7.html#id1">11.22.2. JDBC日志分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc-v7.html#id2">11.22.3. JDBC读写分离分发策略</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc-v7.html#fastpath-call-returned-invalid-large-object-descriptor-0">11.22.4. FastPath call returned invalid large object descriptor：0.</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc-v7.html#fetchsize">11.22.5. fetchsize功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="jdbc-v7.html#mybatis">11.22.6. mybatis一次执行多条语句时报错，错误信息为：“预置的语句中不能插入多个命令”</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SSL.html">11.23. SSL认证常见问题</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SSL.html#id2">11.23.1. 证书生成</a></li>
<li class="toctree-l3"><a class="reference internal" href="SSL.html#id3">11.23.2. 证书配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="SSL.html#id4">11.23.3. 证书有效期</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">12. Docker环境相关问题</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#exit-code-137">12.1. 【exit code 137】错误信息</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#docker-license">12.2. Docker 环境下license机制</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../high-availability.html">13. 读写分离</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html#id2">13.1. 读写分离分发机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html#id3">13.2. 如何测试一下现场的备机失败，转发主机的场景？</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html#id4">13.3. 失败重发机制</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html#ssh">13.4. ssh 引发的相关问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html#id5">13.5. 读写分离备机备份报错</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability.html#hash">13.6. 读写分离集群Hash索引老是出问题</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cluster_faq.html">14. 高可用集群</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#libssl">14.1. libssl 问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#if-up-cmd-faild">14.2. if_up_cmd faild</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#arping">14.3. arping问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#arping-path">14.4. arping_path版本不正确</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#eshamodel-sh">14.5. esHAmodel.sh脚本错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#cluster">14.6. 集群名称不能使用cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#id2">14.7. 网络问题导致备机无法加入集群</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbasecluster">14.8. kingbasecluster服务启动失败</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#sys-md5">14.9. 集群sys_md5生成错误密码</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#node">14.10. 两节点读写分离集群，集群无法创建主备，两个node都是主</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#max-connections">14.11. 集群无法修改max_connections参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#id3">14.12. 软连接配置错误，导致集群启动报缺少磁盘空间</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#rootssh-auth-fail">14.13. 未配置root用户ssh互信，部署集群时，添加节点“auth fail”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#show-pool-nodes">14.14. 防火墙导致集群show pool_nodes信息错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#v8r3auth-fail">14.15.  V8R3集群部署工具“auth fail”错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbase-monitor-shthere-are-no-1-standbys-in-sys-stat-replication">14.16. 集群通过kingbase_monitor.sh启动后“There are no 1 standbys in sys_stat_replication......&quot;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kes-v8r2kingbasecluster9999">14.17. KES V8R2集群kingbasecluster服务9999端口无法连接</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#r3-sys-md5">14.18. R3集群部署工具部署时，出现sys_md5的错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#r3bmjeshamodel-sh">14.19. R3集群BMJ启动esHAmodel.sh失败问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#bmj-r3es-clientes-server">14.20. BMJ R3集群切换后es_client无法和es_server通讯问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbasees-r3standby">14.21. kingbaseES R3集群启动后“无standby”问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbasees-r3kingbasecluster">14.22. kingbaseES R3集群kingbasecluster无法正确识别备库状态</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbasees-r3-db-vip-cluster-vip">14.23. kingbaseES R3 集群无法加载db VIP 和cluster VIP案例</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#down">14.24. 网关无法连通，导致集群down，手工启动数据库服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbaseclusterkingbase-monitor-sh-kingbasecluster">14.25. 备库kingbasecluster服务通过kingbase_monitor.sh启动失败，手工启动kingbasecluster服务解决</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kes-v8r3kingbase-monitor-sh-pam-nologin-8">14.26. KES V8R3集群通过kingbase_monitor.sh启动失败，提示“pam_nologin(8)&quot;错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#conflict-with-recovery">14.27. conflict with recovery问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#sys-dump">14.28. sys_dump备份问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#sys-restore">14.29. sys_restore 恢复数据错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cluster_faq.html#kingbasees-r6open-files">14.30. kingbaseES R6集群部署“open files”问题</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KingbaseES Frequently Asked Questions</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../interface.html"><span class="section-number">11. </span>接口</a> &raquo;</li>
        
      <li><span class="section-number">11.3. </span>Hibernate使用常见问题</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hibernate">
<h1><span class="section-number">11.3. </span>Hibernate使用常见问题<a class="headerlink" href="#hibernate" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2><span class="section-number">11.3.1. </span>Hibernate使用需要配置方言包<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Hibernate的使用需要配置方言包，使用方言包的版本需要根据Hibernate核心包的版本来确定。Hibernate核心包通常由客户从网络下载，核心包的包名为hibernate-core-xxx.jar或hibernate-xxx.jar或hibernatex.jar。目前R2、R3提供以下版本的方言包。</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 74%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>方言包</p></th>
<th class="head"><p>适用范围</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>hibernate-2.0.3dialect.jar</p></td>
<td><p>[2.0,2.1）</p></td>
</tr>
<tr class="row-odd"><td><p>hibernate-3.1dialect.jar</p></td>
<td><p>[3.1,3.2）</p></td>
</tr>
<tr class="row-even"><td><p>hibernate-3.2.7gadialect.jar</p></td>
<td><p>[3.2,3.3）</p></td>
</tr>
<tr class="row-odd"><td><p>hibernate-3.3dialect.jar</p></td>
<td><p>[3.3,3.6）</p></td>
</tr>
<tr class="row-even"><td><p>hibernate-3.6.10dialect.jar</p></td>
<td><p>[3.6,4.0）</p></td>
</tr>
<tr class="row-odd"><td><p>hibernate-4.0.1finaldialect.jar</p></td>
<td><p>[4.0,4.3）</p></td>
</tr>
<tr class="row-even"><td><p>hibernate-4.3.11finaldialect.jar</p></td>
<td><p>[4.3,5.0）</p></td>
</tr>
<tr class="row-odd"><td><p>hibernate-4.3.2finaldialect.jar</p></td>
<td><p>[4.3,5.0）</p></td>
</tr>
<tr class="row-even"><td><p>hibernate-5.0.12.Finaldialect.jar</p></td>
<td><p>[5.0,5.2）</p></td>
</tr>
<tr class="row-odd"><td><p>hibernate-5.2.17.Finaldialect.jar</p></td>
<td><p>[5.2,5.4）</p></td>
</tr>
<tr class="row-even"><td><p>hibernate-5.4.6.Finaldialect.jar</p></td>
<td><p>[5.4,6.0）</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>V7的方言包类名都是KingbaseDialect，V82的方言包类名都是Kingbase8Dialect。请注意类名配置。</p>
<p>使用时注意配置是否填写正确</p>
<p>V7的hibernate 的dialect配置例子</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dialect&quot;</span><span class="o">&gt;</span><span class="n">org</span><span class="o">.</span><span class="n">hibernate</span><span class="o">.</span><span class="n">dialect</span><span class="o">.</span><span class="n">KingbaseDialect</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;connection.driver_class&quot;</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="n">kingbase</span><span class="o">.</span><span class="n">Driver</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;connection.url&quot;</span><span class="o">&gt;</span><span class="n">jdbc</span><span class="p">:</span><span class="n">kingbase</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">87.128</span><span class="p">:</span><span class="mi">5421</span><span class="o">/</span><span class="n">TEST</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>V82的hibernate 的dialect配置例子</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dialect&quot;</span><span class="o">&gt;</span><span class="n">org</span><span class="o">.</span><span class="n">hibernate</span><span class="o">.</span><span class="n">dialect</span><span class="o">.</span><span class="n">Kingbase8Dialect</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;connection.driver_class&quot;</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="n">kingbase8</span><span class="o">.</span><span class="n">Driver</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;connection.url&quot;</span><span class="o">&gt;</span><span class="n">jdbc</span><span class="p">:</span><span class="n">kingbase8</span><span class="p">:</span><span class="o">//</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">87.128</span><span class="p">:</span><span class="mi">54333</span><span class="o">/</span><span class="n">TEST</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>在运行项目时如果遇到以下两种异常，均是因为项目未导入方言包：</p>
<blockquote>
<div><p>1.java.lang.ClassNotFoundException: Could not load requested class : org.hibernate.dialect.Kingbase8Dialect</p>
<p>2.org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.Kingbase8Dialect] as strategy [org.hibernate.dialect.Dialect]</p>
</div></blockquote>
<p>目前遇到的情况有：</p>
<blockquote>
<div><p>1.未将方言包加入项目的classpath中；</p>
<p>2.将核心包当成方言包导入。</p>
</div></blockquote>
</div>
<div class="section" id="v8-hibernatelong">
<h2><span class="section-number">11.3.2. </span>V8 Hibernate非法long值问题<a class="headerlink" href="#v8-hibernatelong" title="Permalink to this headline">¶</a></h2>
<p>这个问题是由于V8 hibernate把TEXT类型默认对应到CLOB类型处理，但是CLOB是通过OID来访问的，所以造成类型转换报错。解决办法更换新的方言包，新的dialect。</p>
<p>方言包把TEXT类型默认对应到LONGVARCHAR就解决了。</p>
</div>
<div class="section" id="hibernate-1">
<h2><span class="section-number">11.3.3. </span>Hibernate 无法确定参数类型$1<a class="headerlink" href="#hibernate-1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>使用cast函数对于不识别的类型进行强转，如cast(? as timestamp)，as后面的类型需要为hibernate类型，hibernate类型自行百度。</p></li>
<li><p>对于V7，这个问题可能是用户打开了Hibernate的SQL注释功能，改为false即可。</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;property name=&quot;use_sql_comments&quot;&gt;false&lt;/property&gt;

parse JDBC_STATEMENT_7: /* from TestDb  where username=$1 */ select testdb0_.id as id0_, testdb0_.username as username0_, testdb0_.btest as btest0_ from hibernate_test testdb0_ where testdb0_.username=$2
ERROR:  could not determine data type of parameter $1
</pre></div>
</div>
</div>
<div class="section" id="hibernate-text-bytea">
<h2><span class="section-number">11.3.4. </span>Hibernate 错误: 字段的类型为 TEXT, 但表达式的类型为 BYTEA你需要重写或转换表达式<a class="headerlink" href="#hibernate-text-bytea" title="Permalink to this headline">¶</a></h2>
<p>问题分析：</p>
<blockquote>
<div><p>这个问题原因是JDBC指定了bytea的OID传给服务器，而服务器实际字段类型是TEXT，不支持类型转换。</p>
<p>查看hibernate源码：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">Query</span> <span class="n">setParameter</span><span class="p">(</span><span class="nb">int</span> <span class="n">position</span><span class="p">,</span> <span class="n">Object</span> <span class="n">val</span><span class="p">)</span> <span class="n">throws</span> <span class="n">HibernateException</span>    <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="n">null</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">setParameter</span><span class="p">(</span> <span class="n">position</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">Hibernate</span><span class="o">.</span><span class="n">SERIALIZABLE</span> <span class="p">);</span>
      <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>看出对于null值，hibernate都是按照Hibernate.SERIALIZABLE类型处理。而Hibernate.SERIALIZABLE类型使用Hibernate.BINARY.set(st, toBytes(value), index)。</p>
<p>Hibernate.BINRAY底层使用JDBC的setBinaryStream或者setBytes绑定参数。</p>
</div></blockquote>
<p>解决办法：</p>
<blockquote>
<div><p>JDBC直接修改所有Bind参数传bytea的地方都改成0。如仍需绑定为bytea，可通过连接参数bytestype=bytea来指定。</p>
</div></blockquote>
</div>
<div class="section" id="hibernatesql">
<h2><span class="section-number">11.3.5. </span>Hibernate控制输出真实SQL日志<a class="headerlink" href="#hibernatesql" title="Permalink to this headline">¶</a></h2>
<p>编辑hibernate.cfg.xml，配置方法：</p>
<ol class="arabic simple">
<li><p>参数：show_sql=true 打印SQL语句；</p></li>
<li><p>参数：format_sql=true 使SQL语句格式更加美观统一；</p></li>
<li><p>参数：use_sql_comments=true 使SQL语句中自动注入注释，增加可读性。</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;show_sql&quot;</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>    <span class="o">//</span><span class="n">控制台打印SQL语句</span>
<span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;format_sql&quot;</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>  <span class="o">//</span><span class="n">格式化SQL语句</span>
<span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;use_sql_comments&quot;</span><span class="o">&gt;</span><span class="n">true</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>  <span class="o">//</span><span class="n">指出是什么操作生成了该语句</span>
</pre></div>
</div>
</div>
<div class="section" id="springboot-jpa">
<h2><span class="section-number">11.3.6. </span>Springboot JPA配置方言包问题<a class="headerlink" href="#springboot-jpa" title="Permalink to this headline">¶</a></h2>
<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource
Caused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set</p>
<p>Hibernate SQL方言没有设置导致的，在properties文件中增加下面这行：</p>
<blockquote>
<div><p>spring.jpa.database-platform=org.hibernate.dialect.Kingbase8Dialect或者spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.Kingbase8Dialect</p>
</div></blockquote>
</div>
<div class="section" id="hibernate-spatial">
<h2><span class="section-number">11.3.7. </span>hibernate-spatial方言包配置<a class="headerlink" href="#hibernate-spatial" title="Permalink to this headline">¶</a></h2>
<p>hibernate-spatial是hibernate的数据空间插件，该方言包只在pg兼容版提供，依赖于hibernate方言包，目前只有5.3.7一个版本，使用该方言只需要将原先配置的hibernate方言的名称改为org.hibernate.spatial.dialect.kingbase.PostgisDialect即可，其他参见hibernate配置。如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dialect&quot;</span><span class="o">&gt;</span><span class="n">org</span><span class="o">.</span><span class="n">hibernate</span><span class="o">.</span><span class="n">spatial</span><span class="o">.</span><span class="n">dialect</span><span class="o">.</span><span class="n">kingbase</span><span class="o">.</span><span class="n">PostgisDialect</span><span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="hibernatenumericchar-1-javaboolean">
<h2><span class="section-number">11.3.8. </span>hibernate使用numeric或char(1)映射java的boolean<a class="headerlink" href="#hibernatenumericchar-1-javaboolean" title="Permalink to this headline">¶</a></h2>
<p>当java类型为boolean，数据库字段类型为char(1)或numeric类型时，需将映射类型设置为org.hibernate.type.NumericBooleanType，例如：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="nb">property</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sex&quot;</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;org.hibernate.type.NumericBooleanType&quot;</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">column</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sex&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>否则，映射为char(1)的时候会报“对于字符类型来说这个值太长了(1)”的错误，映射为numeric时且当该字段作为查询条件时，会在查询的时候无结果，原因是jdbc实际绑定的参数都是0和1，但oid类型为boolean，所以数据库查询时会自动推断类型，参数值被推断为f和t，但实际存储的是0和1，导致查询无结果。</p>
<p>这个问题在后续已修复，可直接更换新的驱动包。但是对于类似于from Person p where p.sex=true;的bool作为查询条件参数写死的hql，还需导入扩展方言hibernate-dialect-extension.jar，方言包名称修改为：org.hibernate.dialect.Kingbase8ExtensionDialect。该方言包依赖原先的方言包。</p>
</div>
<div class="section" id="the-column-name-sequence-catalog-was-not-found-in-this-resultset">
<h2><span class="section-number">11.3.9. </span>The column name sequence_catalog was not found in this ResultSet.<a class="headerlink" href="#the-column-name-sequence-catalog-was-not-found-in-this-resultset" title="Permalink to this headline">¶</a></h2>
<p>Hibernate查询sequence的语句从5.4开始发生了改变，该错误需替换对应版本的方言包，目前我们提供了5.4.6版本的方言包，使用5.4版本以上的核心包，使用5.4.6的方言包。</p>
</div>
<div class="section" id="hilo">
<h2><span class="section-number">11.3.10. </span>主键自增策略hilo<a class="headerlink" href="#hilo" title="Permalink to this headline">¶</a></h2>
<p>使用hilo策略，默认的表hibernate_unique_key需要自己建立，而且必须拥有默认的字段next_hi，建表后，需要插入一条数据作为起始值。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">create</span> <span class="n">table</span> <span class="n">hibernate_unique_key</span> <span class="p">(</span><span class="n">next_hi</span> <span class="n">integer</span> <span class="ow">not</span> <span class="n">null</span><span class="p">);</span>
<span class="n">insert</span> <span class="n">into</span> <span class="n">hibernate_unique_key</span> <span class="p">(</span><span class="n">next_hi</span><span class="p">)</span> <span class="n">values</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="method-com-kingbase8-jdbc-kbpreparedstatement-setcharacterstream-int-reader-long-is-not-yet-implemented">
<h2><span class="section-number">11.3.11. </span>Method com.kingbase8.jdbc.KbPreparedStatement.setCharacterStream(int, Reader, long) is not yet implemented.<a class="headerlink" href="#method-com-kingbase8-jdbc-kbpreparedstatement-setcharacterstream-int-reader-long-is-not-yet-implemented" title="Permalink to this headline">¶</a></h2>
<p>该问题通常因为客户未使用ES的hibernate方言包，在使用了ES的hibernate方言包时，不会走到ES驱动未实现的方法中，解决方案就是配置ES的hibernate方言包。</p>
</div>
<div class="section" id="hibernatehql">
<h2><span class="section-number">11.3.12. </span>Hibernate的hql不支持部分数据库函数的使用<a class="headerlink" href="#hibernatehql" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>将hql语句转换为sql语句，createQuery使用的是hql，createSQLQuery使用的是sql语句；</p></li>
<li><p>在方言包里注册函数解决。</p></li>
</ol>
</div>
<div class="section" id="hibernateupdate">
<h2><span class="section-number">11.3.13. </span>Hibernate设置为update已经建好表，仍旧去建表<a class="headerlink" href="#hibernateupdate" title="Permalink to this headline">¶</a></h2>
<p>原因为使用了大小写不敏感的数据库，在大小写不敏感的库中，查询返回的表名与建表时的大小写保持一致。如果建表时使用小写，Hibernate查询返回的表名为小写，本地的表名是转为大写去比较，找不到所以会去建表，请改为大小写敏感的数据库。</p>
<p><strong>修改后可能存在的问题：</strong></p>
<ol class="arabic simple">
<li><p>索引重复创建</p></li>
</ol>
<blockquote>
<div><p>应用可能是从MySQL、SQLServer迁移过来的。索引名称在某些数据库中（如 MySQL、SQLServer），索引是以表为维度创建的，在不同的表中的索引是可以重名的； 而在另外的一些数据库中（如 PostgreSQL、Oracle、KingbaseES），索引是以数据库为维度创建的，即使是作用在不同表上的索引，它们也要求其名称的唯一性。所以需要修改索引名称。</p>
</div></blockquote>
</div>
<div class="section" id="java-lang-nosuchmethoderror-javax-persistence-table-indexes-ljavax-persistence-index">
<h2><span class="section-number">11.3.14. </span>java.lang.NoSuchMethodError: javax.persistence.Table.indexes()[Ljavax/persistence/Index;<a class="headerlink" href="#java-lang-nosuchmethoderror-javax-persistence-table-indexes-ljavax-persistence-index" title="Permalink to this headline">¶</a></h2>
<p>jar包冲突，有多个jar包存在javax/persistence/Index类。</p>
</div>
<div class="section" id="user">
<h2><span class="section-number">11.3.15. </span>表取名user怎么规避？<a class="headerlink" href="#user" title="Permalink to this headline">¶</a></h2>
<p>在映射上&#64;Table(name=“t_user&quot;)换个名字或者&#64;Table(name=&quot;user&quot;,schema=&quot;xxx&quot;)显示指定模式名</p>
</div>
<div class="section" id="id2">
<h2><span class="section-number">11.3.16. </span>其它模式下有同名表，导致当前模式没有表但未去建表<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>目前已知5.0.12这个版本的hibernate在查找表时，如果没有显示指定模式名，查询顺序为先查当前模式，没有查找默认模式，再没有就查找全模式，其他模式下有表，就会导致当前模式下创建失败，解决方法：1.在&#64;Table显示指定schema；2.删除其他模式下的同名表；3.升级hibernate版本。</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mybatis.html" class="btn btn-neutral float-right" title="11.4. Mybatis 常见问题" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="spring-jdbc.html" class="btn btn-neutral float-left" title="11.2. Spring-JDBC 常见问题" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 1999-2021, 北京人大金仓信息技术股份有限公司

    </p>
  </div>
    
    
     使用 <a href="http://sphinx-doc.org/">Sphinx</a> 创建 。
     最后更新于 Dec 14, 2021。 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>